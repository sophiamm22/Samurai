dc={version:"1.4.0",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null},dc.chartRegistry=function(){function t(t){return t||(t=dc.constants.DEFAULT_CHART_GROUP),n[t]||(n[t]=[]),t}var n={};return this.has=function(t){for(var i in n)if(n[i].indexOf(t)>=0)return!0;return!1},this.register=function(i,r){r=t(r),n[r].push(i)},this.clear=function(){n={}},this.list=function(i){return i=t(i),n[i]},this}(),dc.registerChart=function(n,t){dc.chartRegistry.register(n,t)},dc.hasChart=function(n){return dc.chartRegistry.has(n)},dc.deregisterAllCharts=function(){dc.chartRegistry.clear()},dc.filterAll=function(n){for(var i=dc.chartRegistry.list(n),t=0;t<i.length;++t)i[t].filterAll()},dc.renderAll=function(n){for(var i=dc.chartRegistry.list(n),t=0;t<i.length;++t)i[t].render();dc._renderlet!==null&&dc._renderlet(n)},dc.redrawAll=function(n){for(var i=dc.chartRegistry.list(n),t=0;t<i.length;++t)i[t].redraw();dc._renderlet!==null&&dc._renderlet(n)},dc.transition=function(n,t,i){if(t<=0||t===undefined)return n;var r=n.transition().duration(t);return i instanceof Function&&i(r),r},dc.units={},dc.units.integers=function(n,t){return Math.abs(t-n)},dc.units.ordinal=function(n,t,i){return i},dc.units.float={},dc.units.float.precision=function(n){var t=function(n,i){return Math.ceil(Math.abs((i-n)/t.resolution))};return t.resolution=n,t},dc.round={},dc.round.floor=function(n){return Math.floor(n)},dc.round.ceil=function(n){return Math.ceil(n)},dc.round.round=function(n){return Math.round(n)},dc.override=function(n,t,i){var r=n[t];n["_"+t]=r,n[t]=i},dc.renderlet=function(n){return arguments.length?(dc._renderlet=n,dc):dc._renderlet},dc.instanceOfChart=function(n){return n instanceof Object&&n.__dc_flag__},dc.errors={},dc.errors.Exception=function(n){var t=n!=null?n:"Unexpected internal error";this.message=t,this.toString=function(){return t}},dc.errors.InvalidStateException=function(){dc.errors.Exception.apply(this,arguments)},dc.dateFormat=d3.time.format("%m/%d/%Y"),dc.printers={},dc.printers.filters=function(n){for(var i="",t=0;t<n.length;++t)t>0&&(i+=", "),i+=dc.printers.filter(n[t]);return i},dc.printers.filter=function(n){var t="";return n&&(n instanceof Array?n.length>=2?t="["+dc.utils.printSingleValue(n[0])+" -> "+dc.utils.printSingleValue(n[1])+"]":n.length>=1&&(t=dc.utils.printSingleValue(n[0])):t=dc.utils.printSingleValue(n)),t},dc.utils={},dc.utils.printSingleValue=function(n){var t=""+n;return n instanceof Date?t=dc.dateFormat(n):typeof n=="string"?t=n:typeof n=="number"&&(t=Math.round(n)),t},dc.utils.add=function(n,t){var i,r;return typeof t=="string"&&(t=t.replace("%","")),n instanceof Date?(typeof t=="string"&&(t=+t),i=new Date,i.setTime(n.getTime()),i.setDate(n.getDate()+t),i):typeof t=="string"?(r=+t/100,n>0?n*(1+r):n*(1-r)):n+t},dc.utils.subtract=function(n,t){var i,r;return typeof t=="string"&&(t=t.replace("%","")),n instanceof Date?(typeof t=="string"&&(t=+t),i=new Date,i.setTime(n.getTime()),i.setDate(n.getDate()-t),i):typeof t=="string"?(r=+t/100,n<0?n*(1+r):n*(1-r)):n-t},dc.utils.GroupStack=function(){function r(t){n[t]||(n[t]=[])}var n=[],t=[],i;this.setDataPoint=function(t,i,u){r(t),n[t][i]=u},this.getDataPoint=function(t,i){r(t);var u=n[t][i];return u==undefined&&(u=0),u},this.addGroup=function(n,r){return r||(r=i),t.push([n,r]),t.length-1},this.getGroupByIndex=function(n){return t[n][0]},this.getAccessorByIndex=function(n){return t[n][1]},this.size=function(){return t.length},this.clear=function(){n=[],t=[]},this.setDefaultAccessor=function(n){i=n},this.getDataPoints=function(){return n}},dc.utils.isNegligible=function(n){return n===undefined||n<dc.constants.NEGLIGIBLE_NUMBER&&n>-dc.constants.NEGLIGIBLE_NUMBER},dc.utils.groupMax=function(n,t){var i=d3.max(n.all(),function(n){return t(n)});return dc.utils.isNegligible(i)&&(i=0),i},dc.utils.groupMin=function(n,t){var i=d3.min(n.all(),function(n){return t(n)});return dc.utils.isNegligible(i)&&(i=0),i},dc.utils.nameToId=function(n){return n.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},dc.utils.appendOrSelect=function(n,t){var i=n.select(t);return i.empty()&&(i=n.append(t)),i},dc.events={current:null},dc.events.trigger=function(n,t){if(!t){n();return}dc.events.current=n,setTimeout(function(){n==dc.events.current&&n()},t)},dc.cumulative={},dc.cumulative.Base=function(){this._keyIndex=[],this._map={},this.sanitizeKey=function(n){return n+""},this.clear=function(){this._keyIndex=[],this._map={}},this.size=function(){return this._keyIndex.length},this.getValueByKey=function(n){n=this.sanitizeKey(n);return this._map[n]},this.setValueByKey=function(n,t){return n=this.sanitizeKey(n),this._map[n]=t},this.indexOfKey=function(n){return n=this.sanitizeKey(n),this._keyIndex.indexOf(n)},this.addToIndex=function(n){n=this.sanitizeKey(n),this._keyIndex.push(n)},this.getKeyByIndex=function(n){return this._keyIndex[n]}},dc.cumulative.Sum=function(){dc.cumulative.Base.apply(this,arguments),this.add=function(n,t){t==null&&(t=0),this.getValueByKey(n)==null?(this.addToIndex(n),this.setValueByKey(n,t)):this.setValueByKey(n,this.getValueByKey(n)+t)},this.minus=function(n,t){this.setValueByKey(n,this.getValueByKey(n)-t)},this.cumulativeSum=function(n){var r=this.indexOfKey(n),i,t,u;if(r<0)return 0;for(i=0,t=0;t<=r;++t)u=this.getKeyByIndex(t),i+=this.getValueByKey(u);return i}},dc.cumulative.Sum.prototype=new dc.cumulative.Base,dc.cumulative.CountUnique=function(){function n(n){var t=0,i;for(i in n)n.hasOwnProperty(i)&&t++;return t}dc.cumulative.Base.apply(this,arguments),this.add=function(n,t){this.getValueByKey(n)==null&&(this.setValueByKey(n,{}),this.addToIndex(n)),t!=null&&(this.getValueByKey(n)[t]==null&&(this.getValueByKey(n)[t]=0),this.getValueByKey(n)[t]+=1)},this.minus=function(n,t){this.getValueByKey(n)[t]-=1,this.getValueByKey(n)[t]<=0&&delete this.getValueByKey(n)[t]},this.count=function(t){return n(this.getValueByKey(t))},this.cumulativeCount=function(n){var r=this.indexOfKey(n),i,t,u;if(r<0)return 0;for(i=0,t=0;t<=r;++t)u=this.getKeyByIndex(t),i+=this.count(u);return i}},dc.cumulative.CountUnique.prototype=new dc.cumulative.Base,dc.baseChart=function(n){function rt(n){t.splice(t.indexOf(n),1),p()}function ut(i){t.push(i),p(),n.invokeFilteredListener(n,i)}function ft(){t=[],p(),n.invokeFilteredListener(n,null)}function p(){if(n.dataSet()&&n.dimension().filter!=undefined){var i=y(n.dimension(),t);t=i?i:t}}function it(){for(var t=0;t<a.length;++t)a[t](n)}n.__dc_flag__=!0;var o,e,s,i,u,w=200,b=200,k=function(n){return n.key},d=function(n){return n.value},g=function(n){return n.key},h=!1,nt=function(n){return n.key+": "+n.value},c=!1,tt=750,l=dc.printers.filters,a=[],v=dc.constants.DEFAULT_CHART_GROUP,f=function(){},r={preRender:f,postRender:f,preRedraw:f,postRedraw:f,filtered:f,zoomed:f},t=[],y=function(n,t){return n.filter(null),t.length==0?n.filter(null):t.length==1?n.filter(t[0]):n.filterFunction(function(n){return t.indexOf(n)>=0}),t};return n.width=function(t){return arguments.length?(w=t,n):w},n.height=function(t){return arguments.length?(b=t,n):b},n.dimension=function(t){return arguments.length?(o=t,n.expireCache(),n):o},n.group=function(t){return arguments.length?(e=t,n.expireCache(),n):e},n.orderedGroup=function(){return e.order(function(n){return n.key})},n.filterAll=function(){return n.filter(null)},n.dataSet=function(){return o!=undefined&&e!=undefined},n.select=function(n){return i.select(n)},n.selectAll=function(n){return i?i.selectAll(n):null},n.anchor=function(t,r){return arguments.length?(dc.instanceOfChart(t)?(s=t.anchor(),i=t.root()):(s=t,i=d3.select(s),i.classed(dc.constants.CHART_CLASS,!0),dc.registerChart(n,r)),v=r,n):s},n.root=function(t){return arguments.length?(i=t,n):i},n.svg=function(t){return arguments.length?(u=t,n):u},n.resetSvg=function(){return n.select("svg").remove(),n.generateSvg()},n.generateSvg=function(){return u=n.root().append("svg").attr("width",n.width()).attr("height",n.height())},n.filterPrinter=function(t){return arguments.length?(l=t,n):l},n.turnOnControls=function(){return i&&(n.selectAll(".reset").style("display",null),n.selectAll(".filter").text(l(n.filters())).style("display",null)),n},n.turnOffControls=function(){return i&&(n.selectAll(".reset").style("display","none"),n.selectAll(".filter").style("display","none").text(n.filter())),n},n.transitionDuration=function(t){return arguments.length?(tt=t,n):tt},n.render=function(){if(r.preRender(n),o==null)throw new dc.errors.InvalidStateException("Mandatory attribute chart.dimension is missing on chart["+n.anchor()+"]");if(e==null)throw new dc.errors.InvalidStateException("Mandatory attribute chart.group is missing on chart["+n.anchor()+"]");var t=n.doRender();return n.activateRenderlets("postRender"),t},n.activateRenderlets=function(t){n.transitionDuration()>0&&u?u.transition().duration(n.transitionDuration()).each("end",function(){it(),t&&r[t](n)}):(it(),t&&r[t](n))},n.redraw=function(){r.preRedraw(n);var t=n.doRedraw();return n.activateRenderlets("postRedraw"),t},n.invokeFilteredListener=function(t,i){i!==undefined&&r.filtered(n,i)},n.invokeZoomedListener=function(){r.zoomed(n)},n.hasFilter=function(n){return arguments.length?t.indexOf(n)>=0:t.length>0},n.filter=function(r){return arguments.length?(r==null?ft():n.hasFilter(r)?rt(r):ut(r),i!=null&&n.hasFilter()?n.turnOnControls():n.turnOffControls(),n):t.length>0?t[0]:null},n.filters=function(){return t},n.highlightSelected=function(n){d3.select(n).classed(dc.constants.SELECTED_CLASS,!0),d3.select(n).classed(dc.constants.DESELECTED_CLASS,!1)},n.fadeDeselected=function(n){d3.select(n).classed(dc.constants.SELECTED_CLASS,!1),d3.select(n).classed(dc.constants.DESELECTED_CLASS,!0)},n.resetHighlight=function(n){d3.select(n).classed(dc.constants.SELECTED_CLASS,!1),d3.select(n).classed(dc.constants.DESELECTED_CLASS,!1)},n.onClick=function(t){var i=n.keyAccessor()(t);dc.events.trigger(function(){n.filter(i),dc.redrawAll(n.chartGroup())})},n.filterHandler=function(t){return arguments.length?(y=t,n):y},n.doRender=function(){return n},n.doRedraw=function(){return n},n.keyAccessor=function(t){return arguments.length?(k=t,n):k},n.valueAccessor=function(t){return arguments.length?(d=t,n):d},n.label=function(t){return arguments.length?(g=t,h=!0,n):g},n.renderLabel=function(t){return arguments.length?(h=t,n):h},n.title=function(t){return arguments.length?(nt=t,c=!0,n):nt},n.renderTitle=function(t){return arguments.length?(c=t,n):c},n.renderlet=function(t){return a.push(t),n},n.chartGroup=function(t){return arguments.length?(v=t,n):v},n.on=function(t,i){return r[t]=i,n},n.expireCache=function(){return n},n},dc.marginable=function(n){var t={top:10,right:50,bottom:30,left:30};return n.margins=function(i){return arguments.length?(t=i,n):t},n.effectiveWidth=function(){return n.width()-n.margins().left-n.margins().right},n.effectiveHeight=function(){return n.height()-n.margins().top-n.margins().bottom},n},dc.coordinateGridChart=function(n){function st(i){n.elasticX()&&!n.isOrdinal()&&t.domain([n.xAxisMin(),n.xAxisMax()]),n.isOrdinal()?n.prepareOrdinalXAxis():t.range([0,n.xAxisLength()]),r=r.scale(n.x()).orient("bottom"),vt(i)}function vt(i){var u;if(b){u=i.selectAll("g."+it),u.empty()&&(u=i.insert("g",":first-child").attr("class",nt+" "+it).attr("transform","translate("+n.yAxisX()+","+n.margins().top+")"));var e=r.tickValues()?r.tickValues():t.ticks(r.ticks()[0]),f=u.selectAll("line").data(e),o=f.enter().append("line").attr("x1",function(n){return t(n)}).attr("y1",n.xAxisY()-n.margins().top).attr("x2",function(n){return t(n)}).attr("y2",0).attr("opacity",0);dc.transition(o,n.transitionDuration()).attr("opacity",1),dc.transition(f,n.transitionDuration()).attr("x1",function(n){return t(n)}).attr("y1",n.xAxisY()-n.margins().top).attr("x2",function(n){return t(n)}).attr("y2",0),f.exit().remove()}}function ht(t){(i==null||n.elasticY())&&(i=d3.scale.linear(),i.domain([n.yAxisMin(),n.yAxisMax()]).rangeRound([n.yAxisHeight(),0])),i.range([n.yAxisHeight(),0]),u=u.scale(i).orient("left").ticks(at),yt(t)}function yt(t){var r,e,f,o;w&&(r=t.selectAll("g."+tt),e=u.tickValues()?u.tickValues():i.ticks(u.ticks()[0]),r.empty()&&(r=t.insert("g",":first-child").attr("class",nt+" "+tt).attr("transform","translate("+n.yAxisX()+","+n.margins().top+")")),f=r.selectAll("line").data(e),o=f.enter().append("line").attr("x1",1).attr("y1",function(n){return i(n)}).attr("x2",n.xAxisLength()).attr("y2",function(n){return i(n)}).attr("opacity",0),dc.transition(o,n.transitionDuration()).attr("opacity",1),dc.transition(f,n.transitionDuration()).attr("x1",1).attr("y1",function(n){return i(n)}).attr("x2",n.xAxisLength()).attr("y2",function(n){return i(n)}),f.exit().remove())}function g(){return n.xAxisY()-n.margins().top}function pt(){}function wt(){var t=n.extendBrush();n.redrawBrush(e),n.brushIsEmpty(t)?dc.events.trigger(function(){n.filter(null),dc.redrawAll(n.chartGroup())}):dc.events.trigger(function(){n.filter(null),n.filter([t[0],t[1]]),dc.redrawAll(n.chartGroup())},dc.constants.EVENT_DELAY)}function bt(){}function ct(){return n.anchor().replace("#","")+"-clip"}function kt(){var t=dc.utils.appendOrSelect(l,"defs"),i=dc.utils.appendOrSelect(t,"clipPath").attr("id",ct());dc.utils.appendOrSelect(i,"rect").attr("x",n.margins().left-s).attr("y",n.margins().top-s).attr("width",n.xAxisLength()+s*2).attr("height",n.yAxisHeight()+s*2)}function dt(){d&&n.root().call(d3.behavior.zoom().x(n.x()).scaleExtent([1,100]).on("zoom",function(){n.focus(n.x().domain()),n.invokeZoomedListener(n),gt()}))}function gt(){if(f){var t=n.x().domain(),i=f.xOriginalDomain(),r=[t[0]<i[0]?t[0]:i[0],t[1]>i[1]?t[1]:i[1]];f.focus(r),f.filter(null),f.filter(t),dc.events.trigger(function(){dc.redrawAll(n.chartGroup())})}}function lt(n){return n!=null&&n!=undefined&&n instanceof Array&&n.length>1}var at=5,nt="grid-line",tt="horizontal",it="vertical";n=dc.marginable(dc.baseChart(n));var l,e,p,t,rt,r=d3.svg.axis(),ut=dc.units.integers,a=0,ft=!1,i,u=d3.svg.axis(),v=0,et=!1,o=d3.svg.brush(),h=!0,ot,w=!1,b=!1,y=!1,c,f,k,d=!1,s=5;return n.resetUnitCount=function(){c=null,n.xUnitCount()},n.rangeChart=function(t){return arguments.length?(f=t,f.focusChart(n),n):f},n.generateG=function(t){return l=t==null?n.svg():t,e=l.append("g"),p=e.append("g").attr("class","chartBody").attr("clip-path","url(#"+ct()+")"),e},n.g=function(t){return arguments.length?(e=t,n):e},n.mouseZoomable=function(t){return arguments.length?(d=t,n):d},n.chartBodyG=function(t){return arguments.length?(p=t,n):p},n.x=function(i){return arguments.length?(t=i,rt=t.domain(),n):t},n.xOriginalDomain=function(){return rt},n.xUnits=function(t){return arguments.length?(ut=t,n):ut},n.xAxis=function(t){return arguments.length?(r=t,n):r},n.elasticX=function(t){return arguments.length?(ft=t,n):ft},n.xAxisPadding=function(t){return arguments.length?(a=t,n):a},n.xUnitCount=function(){if(c==null){var t=n.xUnits()(n.x().domain()[0],n.x().domain()[1],n.x().domain());c=t instanceof Array?t.length:t}return c},n.isOrdinal=function(){return n.xUnits()===dc.units.ordinal},n.prepareOrdinalXAxis=function(i){var r;i||(i=n.xUnitCount());var u=[],f=0,e=n.xAxisLength()/i;for(r=0;r<i;r++)u[r]=f,f+=e;t.range(u)},n.renderXAxis=function(t){var i=t.selectAll("g.x");i.empty()&&(i=t.append("g").attr("class","axis x").attr("transform","translate("+n.margins().left+","+n.xAxisY()+")")),dc.transition(i,n.transitionDuration()).call(r)},n.xAxisY=function(){return n.height()-n.margins().bottom},n.xAxisLength=function(){return n.effectiveWidth()},n.renderYAxis=function(t){var i=t.selectAll("g.y");i.empty()&&(i=t.append("g").attr("class","axis y").attr("transform","translate("+n.yAxisX()+","+n.margins().top+")")),dc.transition(i,n.transitionDuration()).call(u)},n.yAxisX=function(){return n.margins().left},n.y=function(t){return arguments.length?(i=t,n):i},n.yAxis=function(t){return arguments.length?(u=t,n):u},n.elasticY=function(t){return arguments.length?(et=t,n):et},n.renderHorizontalGridLines=function(t){return arguments.length?(w=t,n):w},n.renderVerticalGridLines=function(t){return arguments.length?(b=t,n):b},n.xAxisMin=function(){var t=d3.min(n.group().all(),function(t){return n.keyAccessor()(t)});return dc.utils.subtract(t,a)},n.xAxisMax=function(){var t=d3.max(n.group().all(),function(t){return n.keyAccessor()(t)});return dc.utils.add(t,a)},n.yAxisMin=function(){var t=d3.min(n.group().all(),function(t){return n.valueAccessor()(t)});return dc.utils.subtract(t,v)},n.yAxisMax=function(){var t=d3.max(n.group().all(),function(t){return n.valueAccessor()(t)});return dc.utils.add(t,v)},n.yAxisPadding=function(t){return arguments.length?(v=t,n):v},n.yAxisHeight=function(){return n.effectiveHeight()},n.round=function(t){return arguments.length?(ot=t,n):ot},dc.override(n,"filter",function(t){return arguments.length?(n._filter(t),t?n.brush().extent(t):n.brush().clear(),n):n._filter()}),n.brush=function(t){return arguments.length?(o=t,n):o},n.renderBrush=function(t){if(n.isOrdinal()&&(h=!1),h){o.on("brushstart",pt).on("brush",wt).on("brushend",bt);var i=t.append("g").attr("class","brush").attr("transform","translate("+n.margins().left+","+n.margins().top+")").call(o.x(n.x()));i.selectAll("rect").attr("height",g()),i.selectAll(".resize").append("path").attr("d",n.resizeHandlePath),n.hasFilter()&&n.redrawBrush(t)}},n.extendBrush=function(){var t=o.extent();return n.round()&&(t[0]=t.map(n.round())[0],t[1]=t.map(n.round())[1],e.select(".brush").call(o.extent(t))),t},n.brushIsEmpty=function(n){return o.empty()||!n||n[1]<=n[0]},n.redrawBrush=function(t){if(h){n.filter()&&n.brush().empty()&&n.brush().extent(n.filter());var i=t.select("g.brush");i.call(n.brush().x(n.x())),i.selectAll("rect").attr("height",g())}n.fadeDeselectedArea()},n.fadeDeselectedArea=function(){},n.resizeHandlePath=function(n){var r=+(n=="e"),i=r?1:-1,t=g()/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)},n.clipPadding=function(t){return arguments.length?(s=t,n):s},n.doRender=function(){if(t==null)throw new dc.errors.InvalidStateException("Mandatory attribute chart.x is missing on chart["+n.anchor()+"]");return n.resetSvg(),n.dataSet()&&(n.generateG(),kt(),st(n.g()),ht(n.g()),n.plotData(),n.renderXAxis(n.g()),n.renderYAxis(n.g()),n.renderBrush(n.g()),dt()),n},n.doRedraw=function(){return st(n.g()),ht(n.g()),n.plotData(),n.elasticY()&&n.renderYAxis(n.g()),(n.elasticX()||y)&&n.renderXAxis(n.g()),n.redrawBrush(n.g()),n},n.subRender=function(){return n.dataSet()&&n.plotData(),n},n.brushOn=function(t){return arguments.length?(h=t,n):h},n.getDataWithinXDomain=function(t){var i=[];return n.isOrdinal()?i=t.all():t.all().forEach(function(t){var r=n.keyAccessor()(t);r>=n.x().domain()[0]&&r<=n.x().domain()[1]&&i.push(t)}),i},n.focus=function(t){y=!0,lt(t)?n.x().domain(t):n.x().domain(n.xOriginalDomain()),typeof n.resetUnitCount!="undefined"&&n.resetUnitCount(),typeof n.resetBarProperties!="undefined"&&n.resetBarProperties(),n.redraw(),lt(t)||(y=!1)},n.refocused=function(){return y},n.focusChart=function(t){if(!arguments.length)return k;k=t;n.on("filtered",function(n){dc.events.trigger(function(){k.focus(n.filter()),dc.redrawAll(n.chartGroup())})});return n},n},dc.colorChart=function(n){var t=d3.scale.category20c(),i=[0,t.range().length],r=function(r){var u=i[0],f=i[1];if(isNaN(r)&&(r=0),f==null)return t(r);var e=n.colors().range().length,o=(f-u)/e,s=Math.abs(Math.min(e-1,Math.round((r-u)/o)));return n.colors()(s)},u=function(n,t){return t};return n.colors=function(r){var f,u;if(!arguments.length)return t;if(r instanceof Array){for(t=d3.scale.ordinal().range(r),f=[],u=0;u<r.length;++u)f.push(u);t.domain(f)}else t=r;return i=[0,t.range().length],n},n.colorCalculator=function(t){return arguments.length?(r=t,n):r},n.getColor=function(n,t){return r(u(n,t))},n.colorAccessor=function(t){return arguments.length?(u=t,n):u},n.colorDomain=function(t){return arguments.length?(i=t,n):i},n},dc.stackableChart=function(n){function e(t,i){return n.getValueAccessorByIndex(t)(i)}function o(i,r){for(var u=0;u<i.length;++u){var f=i[u],o=e(r,f),s=1e-13;r==0?o>s?t.setDataPoint(r,u,n.dataPointBaseline()-n.dataPointHeight(f,r)):t.setDataPoint(r,u,n.dataPointBaseline()):o>s?t.setDataPoint(r,u,t.getDataPoint(r-1,u)-n.dataPointHeight(f,r)):o<-s?t.setDataPoint(r,u,t.getDataPoint(r-1,u)+n.dataPointHeight(f,r-1)):t.setDataPoint(r,u,t.getDataPoint(r-1,u))}}var f=0,t=new dc.utils.GroupStack,i,r,u;return n.stack=function(i,r){return t.setDefaultAccessor(n.valueAccessor()),t.addGroup(i,r),n.expireCache(),n},n.expireCache=function(){return i=null,r=null,u=null,n},n.allGroups=function(){if(i==null){i=[],i.push(n.group());for(var r=0;r<t.size();++r)i.push(t.getGroupByIndex(r))}return i},n.allValueAccessors=function(){if(r==null){r=[],r.push(n.valueAccessor());for(var i=0;i<t.size();++i)r.push(t.getAccessorByIndex(i))}return r},n.getValueAccessorByIndex=function(t){return n.allValueAccessors()[t]},n.yAxisMin=function(){for(var i=0,u=n.allGroups(),f,r,t=0;t<u.length;++t)r=u[t],f=dc.utils.groupMin(r,n.getValueAccessorByIndex(t)),f<i&&(i=f);if(i<0)for(i=0,t=0;t<u.length;++t)r=u[t],i+=dc.utils.groupMin(r,n.getValueAccessorByIndex(t));return dc.utils.subtract(i,n.yAxisPadding())},n.yAxisMax=function(){for(var i=0,r=n.allGroups(),u,t=0;t<r.length;++t)u=r[t],i+=dc.utils.groupMax(u,n.getValueAccessorByIndex(t));return dc.utils.add(i,n.yAxisPadding())},n.allKeyAccessors=function(){if(u==null){u=[],u.push(n.keyAccessor());for(var i=0;i<t.size();++i)u.push(n.keyAccessor())}return u},n.getKeyAccessorByIndex=function(t){return n.allKeyAccessors()[t]},n.xAxisMin=function(){for(var i=null,u=n.allGroups(),f,r,t=0;t<u.length;++t)f=u[t],r=dc.utils.groupMin(f,n.getKeyAccessorByIndex(t)),(i==null||i>r)&&(i=r);return dc.utils.subtract(i,n.xAxisPadding())},n.xAxisMax=function(){for(var i=null,u=n.allGroups(),f,r,t=0;t<u.length;++t)f=u[t],r=dc.utils.groupMax(f,n.getKeyAccessorByIndex(t)),(i==null||i<r)&&(i=r);return dc.utils.add(i,n.xAxisPadding())},n.baseLineY=function(){return n.y()(0)},n.dataPointBaseline=function(){return n.margins().top+n.baseLineY()},n.dataPointHeight=function(t,i){var u=e(i,t),o=n.y()(u),s=n.baseLineY(),r=0;return r=u>0?s-o:o-s,(isNaN(r)||r<f)&&(r=f),r},n.calculateDataPointMatrixForAll=function(n){for(var i,r,t=0;t<n.length;++t)i=n[t],r=i.all(),o(r,t)},n.calculateDataPointMatrixWithinXDomain=function(t){for(var r,u,i=0;i<t.length;++i)r=t[i],u=n.getDataWithinXDomain(r),o(u,i)},n.getChartStack=function(){return t},dc.override(n,"valueAccessor",function(t){return arguments.length?(n.expireCache(),n._valueAccessor(t)):n._valueAccessor()}),dc.override(n,"keyAccessor",function(t){return arguments.length?(n.expireCache(),n._keyAccessor(t)):n._keyAccessor()}),n},dc.abstractBubbleChart=function(n){var o=.3,t=10,i,r,u,f,e;return n.BUBBLE_NODE_CLASS="node",n.BUBBLE_CLASS="bubble",n.MIN_RADIUS=10,n=dc.colorChart(n),n.renderLabel(!0),n.renderTitle(!1),i=d3.scale.linear().domain([0,100]),r=function(n){return n.r},n.r=function(t){return arguments.length?(i=t,n):i},n.radiusValueAccessor=function(t){return arguments.length?(r=t,n):r},n.rMin=function(){return d3.min(n.group().all(),function(t){return n.radiusValueAccessor()(t)})},n.rMax=function(){return d3.max(n.group().all(),function(t){return n.radiusValueAccessor()(t)})},n.bubbleR=function(t){var r=n.radiusValueAccessor()(t),i=n.r()(r);return(isNaN(i)||r<=0)&&(i=0),i},u=function(t){return n.label()(t)},f=function(i){return n.bubbleR(i)>t?1:0},n.doRenderLabel=function(t){if(n.renderLabel()){var i=t.select("text");i.empty()&&(i=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",n.onClick)),i.attr("opacity",0).text(u),dc.transition(i,n.transitionDuration()).attr("opacity",f)}},n.doUpdateLabels=function(t){if(n.renderLabel()){var i=t.selectAll("text").text(u);dc.transition(i,n.transitionDuration()).attr("opacity",f)}},e=function(t){return n.title()(t)},n.doRenderTitles=function(t){if(n.renderTitle()){var i=t.select("title");i.empty()&&t.append("title").text(e)}},n.doUpdateTitles=function(t){n.renderTitle()&&t.selectAll("title").text(e)},n.minRadiusWithLabel=function(i){return arguments.length?(t=i,n):t},n.maxBubbleRelativeSize=function(t){return arguments.length?(o=t,n):o},n.initBubbleColor=function(t,i){return this[dc.constants.NODE_INDEX_NAME]=i,n.getColor(t,i)},n.updateBubbleColor=function(t){return n.getColor(t,this[dc.constants.NODE_INDEX_NAME])},n.fadeDeselectedArea=function(){n.hasFilter()?n.selectAll("g."+n.BUBBLE_NODE_CLASS).each(function(t){n.isSelectedNode(t)?n.highlightSelected(this):n.fadeDeselected(this)}):n.selectAll("g."+n.BUBBLE_NODE_CLASS).each(function(){n.resetHighlight(this)})},n.isSelectedNode=function(t){return n.hasFilter(t.key)},n.onClick=function(t){var i=t.key;dc.events.trigger(function(){n.filter(i),dc.redrawAll(n.chartGroup())})},n},dc.pieChart=function(n,t){function b(){if(e==Infinity)return i.orderedGroup().top(e);var n=i.group().top(e),t=d3.sum(n,i.valueAccessor()),r=i.group().all(),u=d3.sum(r,i.valueAccessor());return c(n,u-t),n}function a(){var t;if(i.dataSet()){var e=st(),f=i.buildArcs(),n=e(b());u&&(t=u.selectAll("g."+r).data(n),k(t,f,n),it(n,f),et(t),ot())}}function k(n,t,i){var r=d(n);g(r,t),nt(r),tt(i,t)}function d(n){return n.enter().append("g").attr("class",function(n,t){return r+" _"+t})}function g(n,t){var r=n.append("path").attr("fill",function(n,t){return i.getColor(n,t)}).on("click",w).attr("d",function(n,i){return l(n,i,t)});r.transition().duration(i.transitionDuration()).attrTween("d",p)}function nt(n){i.renderTitle()&&n.append("title").text(function(n){return i.title()(n)})}function tt(n,t){if(i.renderLabel()){var e=u.selectAll("text."+r).data(n),o=e.enter().append("text").attr("class",function(n,t){return r+" _"+t}).on("click",w);dc.transition(o,i.transitionDuration()).attr("transform",function(n){n.innerRadius=i.innerRadius(),n.outerRadius=f;var r=t.centroid(n);return isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}).attr("text-anchor","middle").text(function(n){var t=n.data;return y(t)||v(n)?"":i.label()(n)})}}function it(n,t){rt(n,t),ut(n,t),ft(n)}function rt(n,t){var f=u.selectAll("g."+r).data(n).select("path").attr("d",function(n,i){return l(n,i,t)});dc.transition(f,i.transitionDuration(),function(n){n.attrTween("d",p)}).attr("fill",function(n,t){return i.getColor(n,t)})}function ut(n,t){if(i.renderLabel()){var e=u.selectAll("text."+r).data(n);dc.transition(e,i.transitionDuration()).attr("transform",function(n){n.innerRadius=i.innerRadius(),n.outerRadius=f;var r=t.centroid(n);return isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}).attr("text-anchor","middle").text(function(n){var t=n.data;return y(t)||v(n)?"":i.label()(n)})}}function ft(n){i.renderTitle()&&u.selectAll("g."+r).data(n).select("title").text(function(n){return i.title()(n)})}function et(n){n.exit().remove()}function ot(){i.hasFilter()?i.selectAll("g."+r).each(function(n){i.isSelectedSlice(n)?i.highlightSelected(this):i.fadeDeselected(this)}):i.selectAll("g."+r).each(function(){i.resetHighlight(this)})}function st(){return d3.layout.pie().sort(null).value(function(n){return i.valueAccessor()(n)})}function v(n){var t=n.endAngle-n.startAngle;return isNaN(t)||t<s}function y(n){return i.valueAccessor()(n)==0}function p(n){var t,r;return n.innerRadius=i.innerRadius(),t=this._current,ht(t)&&(t={startAngle:0,endAngle:0}),r=d3.interpolate(t,n),this._current=r(0),function(n){return l(r(n),0,i.buildArcs())}}function ht(n){return n==null||isNaN(n.startAngle)||isNaN(n.endAngle)}function w(n){i.onClick(n.data)}function l(n,t,i){var r=i(n,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}var r="pie-slice",f=90,o=0,u,s=.5,i=dc.colorChart(dc.baseChart({})),e=Infinity,h="Others",c=function(n,t){n.push({key:h,value:t})};return i.label(function(n){return i.keyAccessor()(n.data)}),i.renderLabel(!0),i.title(function(n){return i.keyAccessor()(n.data)+": "+i.valueAccessor()(n.data)}),i.transitionDuration(350),i.doRender=function(){return i.resetSvg(),u=i.svg().append("g").attr("transform","translate("+i.cx()+","+i.cy()+")"),a(),i},i.innerRadius=function(n){return arguments.length?(o=n,i):o},i.radius=function(n){return arguments.length?(f=n,i):f},i.cx=function(){return i.width()/2},i.cy=function(){return i.height()/2},i.buildArcs=function(){return d3.svg.arc().outerRadius(f).innerRadius(o)},i.isSelectedSlice=function(n){return i.hasFilter(i.keyAccessor()(n.data))},i.doRedraw=function(){return a(),i},i.minAngleForLabel=function(n){return arguments.length?(s=n,i):s},i.slicesCap=function(n){return arguments.length?(e=n,i):e},i.othersLabel=function(n){return arguments.length?(h=n,i):h},i.othersGrouper=function(n){return arguments.length?(c=n,i):c},i.anchor(n,t)},dc.barChart=function(n,t){function v(n,t){var u=i.getDataWithinXDomain(t),r;y(i.x()(i.keyAccessor()(u[0]))),r=i.chartBodyG().selectAll("rect."+dc.constants.STACK_CLASS+n).data(u),p(r,n),w(r,n),b(r)}function y(n){if(f==null){var r=i.isOrdinal()?s()+1:s(),t=Math.floor((i.xAxisLength()-n-(r-1)*o)/r);(isNaN(t)||t<c)&&(t=c),f=t}}function p(n,t){var n=n.enter().append("rect");if(n.attr("class","bar "+dc.constants.STACK_CLASS+t).attr("x",function(n,i){return l(this,n,t,i)}).attr("y",i.baseLineY()).attr("width",e),i.isOrdinal())n.on("click",i.onClick);i.renderTitle()&&n.append("title").text(i.title()),dc.transition(n,i.transitionDuration()).attr("y",function(n,t){return a(this,n,t)}).attr("height",function(n){return i.dataPointHeight(n,h(this))})}function w(n,t){i.renderTitle()&&n.select("title").text(i.title()),dc.transition(n,i.transitionDuration()).attr("x",function(n){return l(this,n,t)}).attr("y",function(n,t){return a(this,n,t)}).attr("height",function(n){return i.dataPointHeight(n,h(this))}).attr("width",e)}function b(n){dc.transition(n.exit(),i.transitionDuration()).attr("y",i.xAxisY()).attr("height",0)}function s(){return u==null&&(u=i.xUnitCount()),u}function e(){return f}function k(n,t){n[dc.constants.GROUP_INDEX_NAME]=t}function l(n,t,u){k(n,u);var f=i.x()(i.keyAccessor()(t))+i.margins().left;return r&&(f-=e()/2),f}function h(n){return n[dc.constants.GROUP_INDEX_NAME]}function a(n,t,r){var u=h(n);return i.getChartStack().getDataPoint(u,r)}var c=1,i=dc.stackableChart(dc.coordinateGridChart({})),o=2,r=!1,u,f;return i.resetBarProperties=function(){u=null,f=null,s(),e()},i.plotData=function(){var t=i.allGroups(),n;for(i.calculateDataPointMatrixWithinXDomain(t),n=0;n<t.length;++n)v(n,t[n])},i.fadeDeselectedArea=function(){var n=i.chartBodyG().selectAll("rect.bar"),t=i.brush().extent(),r,u;i.isOrdinal()?i.hasFilter()?(n.classed(dc.constants.SELECTED_CLASS,function(n){return i.hasFilter(i.keyAccessor()(n))}),n.classed(dc.constants.DESELECTED_CLASS,function(n){return!i.hasFilter(i.keyAccessor()(n))})):(n.classed(dc.constants.SELECTED_CLASS,!1),n.classed(dc.constants.DESELECTED_CLASS,!1)):i.brushIsEmpty(t)?n.classed(dc.constants.DESELECTED_CLASS,!1):(r=t[0],u=t[1],n.classed(dc.constants.DESELECTED_CLASS,function(n){var t=i.keyAccessor()(n);return t<r||t>=u}))},i.centerBar=function(n){return arguments.length?(r=n,i):r},i.gap=function(n){return arguments.length?(o=n,i):o},i.extendBrush=function(){var n=i.brush().extent();return i.round()&&!r&&(n[0]=n.map(i.round())[0],n[1]=n.map(i.round())[1],i.chartBodyG().select(".brush").call(i.brush().extent(n))),n},dc.override(i,"prepareOrdinalXAxis",function(){return this._prepareOrdinalXAxis(i.xUnitCount()+1)}),i.anchor(n,t)},dc.lineChart=function(n,t){function a(n,t){var r=v(n),u=y(r,t),e=p(u,r,n);f&&w(u,r,n,e),i.renderTitle()&&b(u,n)}function v(n){return dc.constants.STACK_CLASS+n}function y(n,t){var r=i.chartBodyG().select("g."+n);return r.empty()&&(r=i.chartBodyG().append("g").attr("class",n)),r.datum(t.all()),r}function p(n,t,r){var u=n.select("path.line"),f;return u.empty()&&(u=n.append("path").attr("class","line "+t)),u[0][0][dc.constants.GROUP_INDEX_NAME]=r,f=d3.svg.line().x(o).y(function(n,t){var i=this[dc.constants.GROUP_INDEX_NAME];return s(n,t,i)}),dc.transition(u,i.transitionDuration(),function(n){n.ease("linear")}).attr("d",f),f}function w(n,t,r,u){var f=n.select("path.area"),e;f.empty()&&(f=n.append("path").attr("class","area "+t)),f[0][0][dc.constants.GROUP_INDEX_NAME]=r,e=d3.svg.area().x(u.x()).y1(u.y()).y0(function(n,t){var u=this[dc.constants.GROUP_INDEX_NAME],r;return u==0?i.dataPointBaseline()-h:(r=i.getChartStack().getDataPoint(u-1,t),r<i.dataPointBaseline()?r-h:r+i.dataPointHeight(n,u-1))}),dc.transition(f,i.transitionDuration(),function(n){n.ease("linear")}).attr("d",e)}function b(n,t){var r=n.select("g."+c),u;r.empty()&&(r=n.append("g").attr("class",c)),k(r),u=r.selectAll("circle."+l).data(r.datum()),u.enter().append("circle").attr("class",l).attr("r",e).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).on("mousemove",function(){var n=d3.select(this);d(n),g(n,r)}).on("mouseout",function(){var n=d3.select(this);nt(n),tt(r)}).append("title").text(i.title()),u.attr("cx",o).attr("cy",function(n,i){return s(n,i,t)}).select("title").text(i.title()),u.exit().remove()}function k(n){var i=n.select("path."+r).empty()?n.append("path").attr("class",r):n.select("path."+r),t;i.style("display","none").attr("stroke-dasharray","5,5"),t=n.select("path."+u).empty()?n.append("path").attr("class",u):n.select("path."+u),t.style("display","none").attr("stroke-dasharray","5,5")}function d(n){return n.style("fill-opacity",.8),n.style("stroke-opacity",.8),n}function g(n,t){var f=n.attr("cx"),e=n.attr("cy");t.select("path."+r).style("display","").attr("d","M"+i.margins().left+" "+e+"L"+f+" "+e),t.select("path."+u).style("display","").attr("d","M"+f+" "+(i.height()-i.margins().bottom)+"L"+f+" "+e)}function nt(n){n.style("fill-opacity",1e-6).style("stroke-opacity",1e-6)}function tt(n){n.select("path."+r).style("display","none"),n.select("path."+u).style("display","none")}var h=1,c="dc-tooltip",l="dot",r="yRef",u="xRef",i=dc.stackableChart(dc.coordinateGridChart({})),f=!1,e=5,o,s;return i.transitionDuration(500),i.plotData=function(){var t=i.allGroups(),n,r;for(i.calculateDataPointMatrixForAll(t),n=0;n<t.length;++n)r=t[n],a(n,r)},o=function(n){return i.margins().left+i.x()(i.keyAccessor()(n))},s=function(n,t,r){var u=i.getChartStack().getDataPoint(r,t);return u>=i.dataPointBaseline()&&(u+=i.dataPointHeight(n,r)),u},i.renderArea=function(n){return arguments.length?(f=n,i):f},i.dotRadius=function(n){return arguments.length?(e=n,i):e},i.anchor(n,t)},dc.dataCount=function(n,t){var r=d3.format(",d"),i=dc.baseChart({});return i.doRender=function(){return i.selectAll(".total-count").text(r(i.dimension().size())),i.selectAll(".filter-count").text(r(i.group().value())),i},i.doRedraw=function(){return i.doRender()},i.anchor(n,t)},dc.dataTable=function(n,t){function a(){var n=i.root().selectAll("tbody").data(v(),function(n){return i.keyAccessor()(n)}),t=n.enter().append("tbody");return t.append("tr").attr("class",l).append("td").attr("class",h).attr("colspan",r.length).html(function(n){return i.keyAccessor()(n)}),n.exit().remove(),t}function v(){o||(o=crossfilter.quicksort.by(e));var n=i.dimension().top(f);return d3.nest().key(i.group()).sortKeys(u).sortValues(u).entries(o(n,0,n.length))}function y(n){for(var i=n.order().selectAll("tr."+s).data(function(n){return n.values}),f=i.enter().append("tr").attr("class",s),u,t=0;t<r.length;++t)u=r[t],f.append("td").attr("class",c+" _"+t).html(function(n){return u(n)});return i.exit().remove(),i}var h="dc-table-label",s="dc-table-row",c="dc-table-column",l="dc-table-group",i=dc.baseChart({}),f=25,r=[],e=function(n){return n},u=d3.ascending,o;return i.doRender=function(){return i.selectAll("tbody").remove(),y(a()),i},i.doRedraw=function(){return i.doRender()},i.size=function(n){return arguments.length?(f=n,i):f},i.columns=function(n){return arguments.length?(r=n,i):r},i.sortBy=function(n){return arguments.length?(e=n,i):e},i.order=function(n){return arguments.length?(u=n,i):u},i.anchor(n,t)},dc.bubbleChart=function(n,t){function f(n){var t=n.enter().append("g");t.attr("class",i.BUBBLE_NODE_CLASS).attr("transform",u).append("circle").attr("class",function(n,t){return i.BUBBLE_CLASS+" _"+t}).on("click",i.onClick).attr("fill",i.initBubbleColor).attr("r",0),dc.transition(n,i.transitionDuration()).attr("r",function(n){return i.bubbleR(n)}).attr("opacity",function(n){return i.bubbleR(n)>0?1:0}),i.doRenderLabel(t),i.doRenderTitles(t)}function e(n){dc.transition(n,i.transitionDuration()).attr("transform",u).selectAll("circle."+i.BUBBLE_CLASS).attr("fill",i.updateBubbleColor).attr("r",function(n){return i.bubbleR(n)}).attr("opacity",function(n){return i.bubbleR(n)>0?1:0}),i.doUpdateLabels(n),i.doUpdateTitles(n)}function o(n){n.exit().remove()}function s(n){var t=i.x()(i.keyAccessor()(n))+i.margins().left;return isNaN(t)&&(t=0),t}function h(n){var t=i.margins().top+i.y()(i.valueAccessor()(n));return isNaN(t)&&(t=0),t}var i=dc.abstractBubbleChart(dc.coordinateGridChart({})),r=!1,u;return i.transitionDuration(750),u=function(n){return"translate("+s(n)+","+h(n)+")"},i.elasticRadius=function(n){return arguments.length?(r=n,i):r},i.plotData=function(){r&&i.r().domain([i.rMin(),i.rMax()]),i.r().range([i.MIN_RADIUS,i.xAxisLength()*i.maxBubbleRelativeSize()]);var n=i.chartBodyG().selectAll("g."+i.BUBBLE_NODE_CLASS).data(i.group().all());f(n),e(n),o(n),i.fadeDeselectedArea()},i.renderBrush=function(){},i.redrawBrush=function(){i.fadeDeselectedArea()},i.anchor(n,t)},dc.compositeChart=function(n,t){function u(n,t){n.generateG(i.g()),n.g().attr("class",f+" _"+t)}function e(){for(var t=[],n=0;n<r.length;++n)t.push(r[n].yAxisMin());return t}function o(){for(var t=[],n=0;n<r.length;++n)t.push(r[n].yAxisMax());return t}function s(){for(var t=[],n=0;n<r.length;++n)t.push(r[n].xAxisMin());return t}function h(){for(var t=[],n=0;n<r.length;++n)t.push(r[n].xAxisMax());return t}var f="sub",i=dc.coordinateGridChart({}),r=[];return i.transitionDuration(500),dc.override(i,"generateG",function(){for(var f=this._generateG(),n,t=0;t<r.length;++t)n=r[t],u(n,t),n.dimension()==null&&n.dimension(i.dimension()),n.group()==null&&n.group(i.group()),n.chartGroup(i.chartGroup()),n.svg(i.svg()),n.height(i.height()),n.width(i.width()),n.margins(i.margins()),n.xUnits(i.xUnits()),n.transitionDuration(i.transitionDuration());return f}),i.plotData=function(){for(var n,t=0;t<r.length;++t)n=r[t],n.g()==null&&u(n,t),n.x(i.x()),n.y(i.y()),n.xAxis(i.xAxis()),n.yAxis(i.yAxis()),n.plotData(),n.activateRenderlets()},i.fadeDeselectedArea=function(){for(var t,n=0;n<r.length;++n)t=r[n],t.brush(i.brush()),t.fadeDeselectedArea()},i.compose=function(n){return r=n,i},i.children=function(){return r},i.yAxisMin=function(){return d3.min(e())},i.yAxisMax=function(){return dc.utils.add(d3.max(o()),i.yAxisPadding())},i.xAxisMin=function(){return dc.utils.subtract(d3.min(s()),i.xAxisPadding())},i.xAxisMax=function(){return dc.utils.add(d3.max(h()),i.xAxisPadding())},i.anchor(n,t)},dc.geoChoroplethChart=function(n,t){function o(n){var u=dc.utils.groupMax(i.group(),i.valueAccessor()),r=c(),t;l(n)&&(t=a(n),y(t,n,r,u),p(t,n,r))}function c(){for(var r={},t=i.group().all(),n=0;n<t.length;++n)r[i.keyAccessor()(t[n])]=i.valueAccessor()(t[n]);return r}function l(n){return u(n).keyAccessor}function a(n){return i.svg().selectAll(v(n)).classed("selected",function(t){return s(n,t)}).classed("deselected",function(t){return h(n,t)}).attr("class",function(t){var r=u(n).name,f=dc.utils.nameToId(u(n).keyAccessor(t)),i=r+" "+f;return s(n,t)&&(i+=" selected"),h(n,t)&&(i+=" deselected"),i})}function v(n){return"g.layer"+n+" g."+u(n).name}function s(n,t){return i.hasFilter()&&i.hasFilter(e(n,t))}function h(n,t){return i.hasFilter()&&!i.hasFilter(e(n,t))}function e(n,t){return u(n).keyAccessor(t)}function u(n){return r[n]}function y(n,t,r){var f=n.select("path").attr("fill",function(){var n=d3.select(this).attr("fill");return n?n:"none"}).on("click",function(n){return i.onClick(n,t)});dc.transition(f,i.transitionDuration()).attr("fill",function(n,f){return i.getColor(r[u(t).keyAccessor(n)],f)})}function p(n,t,r){i.renderTitle()&&n.selectAll("title").text(function(n){var u=e(t,n),f=r[u];return i.title()({key:u,value:f})})}var i=dc.colorChart(dc.baseChart({})),f,r;return i.colorAccessor(function(n){return n}),f=d3.geo.path(),r=[],i.doRender=function(){var n,e,t;for(i.resetSvg(),n=0;n<r.length;++n)e=i.svg().append("g").attr("class","layer"+n),t=e.selectAll("g."+u(n).name).data(u(n).data).enter().append("g").attr("class",u(n).name),t.append("path").attr("fill","white").attr("d",f),t.append("title"),o(n)},i.onClick=function(n,t){var r=u(t).keyAccessor(n);dc.events.trigger(function(){i.filter(r),dc.redrawAll(i.chartGroup())})},i.doRedraw=function(){for(var n=0;n<r.length;++n)o(n)},i.overlayGeoJson=function(n,t,u){for(var f=0;f<r.length;++f)if(r[f].name==t)return r[f].data=n,r[f].keyAccessor=u,i;return r.push({name:t,data:n,keyAccessor:u}),i},i.projection=function(n){return f.projection(n),i},i.geoJsons=function(){return r},i.removeGeoJson=function(n){for(var f=[],u,t=0;t<r.length;++t)u=r[t],u.name!=n&&f.push(u);return r=f,i},i.anchor(n,t)},dc.bubbleOverlay=function(n,t){function c(){return r=i.select("g."+e),r.empty()&&(r=i.svg().append("g").attr("class",e)),r}function l(){var n=o();f.forEach(function(t){var r=s(t,n),f=r.select("circle."+u);f.empty()&&(f=r.append("circle").attr("class",u).attr("r",0).attr("fill",i.initBubbleColor).on("click",i.onClick)),dc.transition(f,i.transitionDuration()).attr("r",function(n){return i.bubbleR(n)}),i.doRenderLabel(r),i.doRenderTitles(r)})}function o(){var n={};return i.group().all().forEach(function(t){n[i.keyAccessor()(t)]=t}),n}function s(n,t){var u=h+" "+dc.utils.nameToId(n.name),i=r.select("g."+dc.utils.nameToId(n.name));return i.empty()&&(i=r.append("g").attr("class",u).attr("transform","translate("+n.x+","+n.y+")")),i.datum(t[n.name]),i}function a(){var n=o();f.forEach(function(t){var r=s(t,n),f=r.select("circle."+u);dc.transition(f,i.transitionDuration()).attr("r",function(n){return i.bubbleR(n)}).attr("fill",i.updateBubbleColor),i.doUpdateLabels(r),i.doUpdateTitles(r)})}var e="bubble-overlay",h="node",u="bubble",i=dc.abstractBubbleChart(dc.baseChart({})),r,f=[];return i.transitionDuration(750),i.radiusValueAccessor(function(n){return n.value}),i.point=function(n,t,r){return f.push({name:n,x:t,y:r}),i},i.doRender=function(){return r=c(),i.r().range([i.MIN_RADIUS,i.width()*i.maxBubbleRelativeSize()]),l(),i.fadeDeselectedArea(),i},i.doRedraw=function(){return a(),i.fadeDeselectedArea(),i},i.debug=function(n){var t,r;if(n){t=i.select("g."+dc.constants.DEBUG_GROUP_CLASS),t.empty()&&(t=i.svg().append("g").attr("class",dc.constants.DEBUG_GROUP_CLASS)),r=t.append("text").attr("x",10).attr("y",20);t.append("rect").attr("width",i.width()).attr("height",i.height()).on("mousemove",function(){var n=d3.mouse(t.node()),i=n[0]+", "+n[1];r.text(i)})}else i.selectAll(".debug").remove();return i},i.anchor(n,t),i},dc.rowChart=function(n,t){function p(){(!f||o)&&(f=d3.scale.linear().domain([0,d3.max(i.group().all(),i.valueAccessor())]).range([0,i.effectiveWidth()]),s.scale(f))}function l(){var n=r.select("g.axis");p(),n.empty()&&(n=r.append("g").attr("class","axis").attr("transform","translate(0, "+i.effectiveHeight()+")")),dc.transition(n,i.transitionDuration()).call(s)}function a(){r.selectAll("g.tick").select("line.grid-line").remove(),r.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-i.effectiveHeight()})}function v(){l(),a();var n=r.selectAll("g."+e).data(i.group().all());w(n),b(n),k(n)}function w(n){var t=n.enter().append("g").attr("class",function(n,t){return e+" _"+t});t.append("rect").attr("width",0),g(t),nt(n)}function b(n){n.exit().remove()}function k(n){var t=it();n=n.attr("transform",function(n,i){return"translate(0,"+((i+1)*u+i*t)+")"}).select("rect").attr("height",t).attr("fill",i.getColor).on("click",y).classed("deselected",function(n){return i.hasFilter()?!i.isSelectedRow(n):!1}).classed("selected",function(n){return i.hasFilter()?i.isSelectedRow(n):!1}),dc.transition(n,i.transitionDuration()).attr("width",function(n){return f(i.valueAccessor()(n))}),d(n)}function d(n){i.renderTitle()&&(n.selectAll("title").remove(),n.append("title").text(function(n){return i.title()(n)}))}function g(n){if(i.renderLabel())n.append("text").on("click",y)}function nt(n){i.renderLabel()&&n.select("text").attr("x",h).attr("y",c).attr("class",function(n,t){return e+" _"+t}).text(function(n){return i.label()(n)})}function tt(){return i.group().all().length}function it(){var n=tt();return(i.effectiveHeight()-(n+1)*u)/n}function y(n){i.onClick(n)}var r,h=10,c=15,u=5,e="row",i=dc.marginable(dc.colorChart(dc.baseChart({}))),f,o,s=d3.svg.axis().orient("bottom");return i.doRender=function(){return i.resetSvg(),r=i.svg().append("g").attr("transform","translate("+i.margins().left+","+i.margins().top+")"),l(),a(),v(),i},i.title(function(n){return i.keyAccessor()(n)+": "+i.valueAccessor()(n)}),i.label(function(n){return i.keyAccessor()(n)}),i.doRedraw=function(){return v(),i},i.xAxis=function(){return s},i.gap=function(n){return arguments.length?(u=n,i):u},i.elasticX=function(n){return arguments.length?(o=n,i):o},i.labelOffsetX=function(n){return arguments.length?(_labelOffset=n,i):h},i.labelOffsetY=function(n){return arguments.length?(_labelOffset=n,i):c},i.isSelectedRow=function(n){return i.hasFilter(i.keyAccessor()(n))},i.anchor(n,t)};
//@ sourceMappingURL=dc.min.js.map